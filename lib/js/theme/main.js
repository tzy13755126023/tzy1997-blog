document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("site-name"),t=e&&e.offsetWidth,i=document.querySelector("#menus .menus_items"),n=i&&i.offsetWidth,l=document.querySelector("#search-button"),a=l&&l.offsetWidth,s=(s=!1)=>{s&&(t=e&&e.offsetWidth,n=i&&i.offsetWidth,a=l&&l.offsetWidth);let o=document.getElementById("nav"),c;(c=window.innerWidth<768||t+n+a>o.offsetWidth-120)?o.classList.add("hide-menu"):o.classList.remove("hide-menu")},o=()=>{s(),document.getElementById("nav").classList.add("show")},c=()=>{let e=document.getElementById("toggle-menu"),t=document.getElementById("sidebar-menus"),i=document.getElementById("menu-mask"),n=document.body;function l(){n.style.overflow="",n.style.paddingRight="",btf.fadeOut(i,.5),t.classList.remove("open")}e.addEventListener("click",function e(){btf.sidebarPaddingR(),n.style.overflow="hidden",btf.fadeIn(i,.5),t.classList.add("open")}),i.addEventListener("click",e=>{t.classList.contains("open")&&l()}),window.addEventListener("resize",i=>{btf.isHidden(e)&&t.classList.contains("open")&&l()})},r=()=>{let e=document.getElementById("scroll-down");e&&e.addEventListener("click",function(){btf.scrollToDest(document.getElementById("content-inner").offsetTop,300)})},d=function(){let e=GLOBAL_CONFIG.highlight;if(!e)return;let t=e.highlightCopy,i=e.highlightLang,n=GLOBAL_CONFIG_SITE.isHighlightShrink,l=e.highlightHeightLimit,a=t||i||void 0!==n,s="highlighjs"===e.plugin?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if(!((a||l)&&s.length))return;let o="prismjs"===e.plugin,c="",r="",d=!0===n?"closed":"";void 0!==n&&(c=`<i class="fas fa-angle-down expand ${d}"></i>`),t&&(r='<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>');let u=(e,t)=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){if(document.execCommand("copy"),void 0!==GLOBAL_CONFIG.Snackbar)btf.snackbarShow(GLOBAL_CONFIG.copy.success);else{let i=t.previousElementSibling;i.innerText=GLOBAL_CONFIG.copy.success,i.style.opacity=1,setTimeout(()=>{i.style.opacity=0},700)}}else void 0!==GLOBAL_CONFIG.Snackbar?btf.snackbarShow(GLOBAL_CONFIG.copy.noSupport):t.previousElementSibling.innerText=GLOBAL_CONFIG.copy.noSupport},h=e=>{let t=e.parentNode;t.classList.add("copy-true");let i=window.getSelection(),n=document.createRange();o?n.selectNodeContents(t.querySelectorAll("pre code")[0]):n.selectNodeContents(t.querySelectorAll("table .code pre")[0]),i.removeAllRanges(),i.addRange(n);let l=i.toString();u(l,e.lastChild),i.removeAllRanges(),t.classList.remove("copy-true")},g=e=>{let t=[...e.parentNode.children].slice(1);e.firstChild.classList.toggle("closed"),btf.isHidden(t[t.length-1])?t.forEach(e=>{e.style.display="block"}):t.forEach(e=>{e.style.display="none"})},f=function(e){let t=e.target.classList;t.contains("expand")?g(this):t.contains("copy-button")&&h(this)},p=function(){this.classList.toggle("expand-done")};function y(e,t,i){let n=document.createDocumentFragment();if(a){let s=document.createElement("div");s.className=`highlight-tools ${d}`,s.innerHTML=c+e+r,s.addEventListener("click",f),n.appendChild(s)}if(l&&t.offsetHeight>l+30){let o=document.createElement("div");o.className="code-expand-btn",o.innerHTML='<i class="fas fa-angle-double-down"></i>',o.addEventListener("click",p),n.appendChild(o)}"hl"===i?t.insertBefore(n,t.firstChild):t.parentNode.insertBefore(n,t)}i?o?s.forEach(function(e){let t=e.getAttribute("data-language")?e.getAttribute("data-language"):"Code",i=`<div class="code-lang">${t}</div>`;btf.wrap(e,"figure","","highlight"),y(i,e)}):s.forEach(function(e){let t=e.getAttribute("class").split(" ")[1];("plain"===t||void 0===t)&&(t="Code");let i=`<div class="code-lang">${t}</div>`;y(i,e,"hl")}):o?s.forEach(function(e){btf.wrap(e,"figure","","highlight"),y("",e)}):s.forEach(function(e){y("",e,"hl")})},u=!1,h=function(e){let t=$(e),i=t.find("img");i.unwrap(),i.length&&i.each(function(e,t){$(t).attr("data-lazy-src")&&$(t).attr("src",$(t).attr("data-lazy-src")),$(t).wrap("<div></div>")}),u?btf.initJustifiedGallery(t):($("head").append(`<link rel="stylesheet" type="text/css" href="${GLOBAL_CONFIG.source.justifiedGallery.css}">`),$.getScript(`${GLOBAL_CONFIG.source.justifiedGallery.js}`,function(){btf.initJustifiedGallery(t)}),u=!0)},g=function(e){let t=e=>{e.each(function(e,t){let i=$(t),n=i.attr("data-lazy-src")||i.attr("src"),l=i.attr("alt")||"";i.wrap(`<a href="${n}" data-fancybox="group" data-caption="${l}" class="fancybox"></a>`)}),$().fancybox({selector:"[data-fancybox]",loop:!0,transitionEffect:"slide",protect:!0,buttons:["slideShow","fullScreen","thumbs","close"],hash:!1})};void 0===$.fancybox?($("head").append(`<link rel="stylesheet" type="text/css" href="${GLOBAL_CONFIG.source.fancybox.css}">`),$.getScript(`${GLOBAL_CONFIG.source.fancybox.js}`,function(){t($(e))})):t($(e))},f=()=>{let e=mediumZoom(document.querySelectorAll("#article-container :not(a)>img"));e.on("open",t=>{let i="dark"===document.documentElement.getAttribute("data-theme")?"#121212":"#fff";e.update({background:i})})},p=()=>{let e="fancybox"===GLOBAL_CONFIG.lightbox?document.querySelectorAll("#article-container\xa0img:not(.no-lightbox)"):[],t=e.length>0,i=document.querySelectorAll("#article-container .justified-gallery"),n=i.length>0;(n||t)&&btf.isJqueryLoad(()=>{n&&h(i),t&&g(e)})},y=function(){let e=document.getElementById("rightside"),t=window.innerHeight+56;if(document.body.scrollHeight<=t){e.style.cssText="opacity: 1; transform: translateX(-38px)";return}let i=0,n=!0,l=document.getElementById("page-header"),a="function"==typeof chatBtnHide,s="function"==typeof chatBtnShow;window.addEventListener("scroll",btf.throttle(function(o){let c=window.scrollY||document.documentElement.scrollTop,r=function e(t){let n=t>i;return i=t,n}(c);c>56?(r?(l.classList.contains("nav-visible")&&l.classList.remove("nav-visible"),s&&!0===n&&(chatBtnHide(),n=!1)):(l.classList.contains("nav-visible")||l.classList.add("nav-visible"),a&&!1===n&&(chatBtnShow(),n=!0)),l.classList.add("nav-fixed"),"0"===window.getComputedStyle(e).getPropertyValue("opacity")&&(e.style.cssText="opacity: 1; transform: translateX(-38px)")):(0===c&&l.classList.remove("nav-fixed","nav-visible"),e.style.cssText="opacity: ''; transform: ''"),document.body.scrollHeight<=t&&(e.style.cssText="opacity: 1; transform: translateX(-38px)")},200))},m=function(){let e=document.getElementById("card-toc"),t=e.getElementsByClassName("toc-content")[0],i=t.querySelectorAll(".toc-link"),n=document.getElementById("article-container");window.addEventListener("scroll",btf.throttle(function(e){let t=window.scrollY||document.documentElement.scrollTop;l(t),u(t)},100));let l=function(e){let i=n.clientHeight,l=document.documentElement.clientHeight,a=n.offsetTop,s=i>l?i-l:document.documentElement.scrollHeight-l,o=Math.round(100*((e-a)/s));t.setAttribute("progress-percentage",o>100?100:o<=0?0:o)},a=GLOBAL_CONFIG.isanchor,s=function(e){window.history.replaceState&&e!==window.location.hash&&(e||(e=location.pathname),window.history.replaceState({},"",e))},o={open(){e.style.cssText="animation: toc-open .3s; opacity: 1; right: 45px"},close(){e.style.animation="toc-close .2s",setTimeout(()=>{e.style.cssText="opacity:''; animation: ''; right: ''"},100)}};document.getElementById("mobile-toc-button").addEventListener("click",()=>{"0"===window.getComputedStyle(e).getPropertyValue("opacity")?o.open():o.close()}),t.addEventListener("click",e=>{e.preventDefault();let t=e.target.classList.contains("toc-link")?e.target:e.target.parentElement;btf.scrollToDest(btf.getEleTop(document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""))),300),window.innerWidth<900&&o.close()});let c=function(e){let i=e.getBoundingClientRect().top,n=t.scrollTop;i>document.documentElement.clientHeight-100&&(t.scrollTop=n+150),i<100&&(t.scrollTop=n-150)},r=n.querySelectorAll("h1,h2,h3,h4,h5,h6"),d="",u=function(e){if(0===i.length||0===e)return!1;let n="",l="";if(r.forEach(function(t,i){e>btf.getEleTop(t)-80&&(n="#"+encodeURI(t.getAttribute("id")),l=i)}),d===l)return;if(a&&s(n),""===n){t.querySelectorAll(".active").forEach(e=>{e.classList.remove("active")}),d=l;return}d=l,t.querySelectorAll(".active").forEach(e=>{e.classList.remove("active")});let o=i[l];o.classList.add("active"),setTimeout(()=>{c(o)},0);let u=o.parentNode;for(;!u.matches(".toc");u=u.parentNode)u.matches("li")&&u.classList.add("active")}},b={switchReadMode(){let e=document.body;e.classList.add("read-mode");let t=document.createElement("button");function i(){e.classList.remove("read-mode"),t.remove(),t.removeEventListener("click",i)}t.type="button",t.className="fas fa-sign-out-alt exit-readmode",e.appendChild(t),t.addEventListener("click",i)},switchDarkMode(){let e="dark"===document.documentElement.getAttribute("data-theme")?"dark":"light";"light"===e?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout(()=>window.disqusReset(),200)},showOrHideBtn(){document.getElementById("rightside-config-hide").classList.toggle("show")},scrollToTop(){btf.scrollToDest(0,500)},hideAsideBtn(){let e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("aside-status","show",2):saveToLocal.set("aside-status","hide",2),e.toggle("hide-aside")},adjustFontSize(e){let t=parseInt(window.getComputedStyle(document.documentElement).getPropertyValue("--global-font-size")),i="";if(e){if(t>=20)return;i=t+1,document.documentElement.style.setProperty("--global-font-size",i+"px"),document.getElementById("nav").classList.contains("hide-menu")||s(!0)}else{if(t<=10)return;i=t-1,document.documentElement.style.setProperty("--global-font-size",i+"px"),document.getElementById("nav").classList.contains("hide-menu")&&s(!0)}saveToLocal.set("global-font-size",i,2)}};document.getElementById("rightside").addEventListener("click",function(e){let t=e.target.id||e.target.parentNode.id;switch(t){case"go-up":b.scrollToTop();break;case"rightside_config":b.showOrHideBtn();break;case"readmode":b.switchReadMode();break;case"darkmode":b.switchDarkMode();break;case"hide-aside-btn":b.hideAsideBtn();break;case"font-plus":b.adjustFontSize(!0);break;case"font-minus":b.adjustFontSize()}});let v=()=>{let e=document.getElementById("runtimeshow");if(e){let t=e.getAttribute("data-publishDate");e.innerText=btf.diffDate(t)+" "+GLOBAL_CONFIG.runtime}},E=()=>{let e=document.getElementById("last-push-date");if(e){let t=e.getAttribute("data-lastPushDate");e.innerText=btf.diffDate(t,!0)}},L=function(){let e=document.querySelectorAll("#article-container :not(.highlight) > table, #article-container > table");e.length&&e.forEach(e=>{btf.wrap(e,"div","","table-wrap")})},S=function(){let e=document.querySelectorAll("#article-container .hide-button");e.length&&e.forEach(function(e){e.addEventListener("click",function(e){let t=this.nextElementSibling;this.classList.toggle("open"),this.classList.contains("open")&&t.querySelectorAll(".justified-gallery").length>0&&btf.initJustifiedGallery(t.querySelectorAll(".justified-gallery"))})})},k={clickFnOfTabs:function(){document.querySelectorAll("#article-container .tab > button").forEach(function(e){e.addEventListener("click",function(e){let t=this.parentNode;if(!t.classList.contains("active")){let i=t.parentNode.nextElementSibling,n=btf.siblings(t,".active")[0];n&&n.classList.remove("active"),t.classList.add("active");let l=this.getAttribute("data-href").replace("#",""),a=[...i.children];a.forEach(e=>{e.id===l?e.classList.add("active"):e.classList.remove("active")});let s=i.querySelectorAll(`#${l} .justified-gallery`);s.length>0&&btf.initJustifiedGallery(s)}})})},backToTop(){document.querySelectorAll("#article-container .tabs .tab-to-top").forEach(function(e){e.addEventListener("click",function(){btf.scrollToDest(btf.getEleTop(btf.getParents(this,".tabs")),300)})})}},x=function(){let e=document.querySelectorAll("#aside-cat-list .card-category-list-item.parent i");e.length&&e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("expand");let t=this.parentNode.nextElementSibling;btf.isHidden(t)?t.style.display="block":t.style.display="none"})})},A=function(){let e=!1,t=document.querySelector("#comment-switch > .switch-btn");t&&t.addEventListener("click",function(){this.classList.toggle("move"),document.querySelectorAll("#post-comment > .comment-wrap > div").forEach(function(e){btf.isHidden(e)?e.style.cssText="display: block;animation: tabshow .5s":e.style.cssText="display: none;animation: ''"}),e||"function"!=typeof loadOtherComment||(e=!0,loadOtherComment())})},T=function(){let e=GLOBAL_CONFIG.noticeOutdate,t=btf.diffDate(GLOBAL_CONFIG_SITE.postUpdate);if(t>=e.limitDay){let i=document.createElement("div");i.className="post-outdate-notice",i.textContent=e.messagePrev+" "+t+" "+e.messageNext;let n=document.getElementById("article-container");"top"===e.position?n.insertBefore(i,n.firstChild):n.appendChild(i)}},q=function(e){e.forEach(e=>{let t=e,i=t.getAttribute("datetime");t.innerText=btf.diffDate(i,!0),t.style.display="inline"})};window.refreshFn=function(){o(),GLOBAL_CONFIG_SITE.isPost?(GLOBAL_CONFIG_SITE.isToc&&m(),void 0!==GLOBAL_CONFIG.noticeOutdate&&T(),GLOBAL_CONFIG.relativeDate.post&&q(document.querySelectorAll("#post-meta time"))):(GLOBAL_CONFIG.relativeDate.homepage&&q(document.querySelectorAll("#recent-posts time")),GLOBAL_CONFIG.runtime&&v(),E(),x()),c(),GLOBAL_CONFIG_SITE.isHome&&r(),d(),GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach(function(e){let t=e.parentNode;if(!t.parentNode.classList.contains("justified-gallery")){let i=document.createElement("div");i.className="img-alt is-center",i.textContent=e.getAttribute("alt"),t.insertBefore(i,e.nextSibling)}}),p(),"mediumZoom"===GLOBAL_CONFIG.lightbox&&f(),y(),L(),S(),k.clickFnOfTabs(),k.backToTop(),A()},refreshFn(),window.addEventListener("resize",s),window.addEventListener("orientationchange",()=>{setTimeout(s(!0),100)}),document.querySelectorAll("#sidebar-menus .expand").forEach(function(e){e.addEventListener("click",function(){this.classList.toggle("hide");let e=this.parentNode.nextElementSibling;btf.isHidden(e)?e.style.display="block":e.style.display="none"})}),window.addEventListener("touchmove",function(e){let t=document.querySelectorAll("#nav .menus_item_child");t.forEach(e=>{btf.isHidden(e)||(e.style.display="none")})}),GLOBAL_CONFIG.islazyload&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})),void 0!==GLOBAL_CONFIG.copyright&&(()=>{let e=GLOBAL_CONFIG.copyright;document.body.oncopy=t=>{t.preventDefault();let i,n=window.getSelection(0).toString();return(i=n.length>e.limitCount?n+"\n\n\n"+e.languages.author+"\n"+e.languages.link+window.location.href+"\n"+e.languages.source+"\n"+e.languages.info:n,t.clipboardData)?t.clipboardData.setData("text",i):window.clipboardData.setData("text",i)}})()});