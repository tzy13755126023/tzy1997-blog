var volume=0.8;const params=new URLSearchParams(window.location.search);var tzy={changeMusicBg:function(isChangeBg=true){const tzyMusicBg=document.getElementById("music_bg");if(isChangeBg){const musiccover=document.querySelector("#tzyMusic-page .aplayer-pic");var img=new Image();img.src=extractValue(musiccover.style.backgroundImage);img.onload=function(){tzyMusicBg.style.backgroundImage=musiccover.style.backgroundImage;};}else{let timer=setInterval(()=>{const musiccover=document.querySelector("#tzyMusic-page .aplayer-pic");if(musiccover){clearInterval(timer);document.querySelector('meting-js').aplayer.volume(0.8,true);tzy.addEventListenerChangeMusicBg();}},100)}},addEventListenerChangeMusicBg:function(){const tzyMusicPage=document.getElementById("tzyMusic-page");tzyMusicPage.querySelector("meting-js").aplayer.on('loadeddata',function(){tzy.changeMusicBg();});},getCustomPlayList:function(){const tzyMusicPage=document.getElementById("tzyMusic-page");const playlistType=params.get("type")||"playlist";if(params.get("id")&&params.get("server")){var id=params.get("id");var server=params.get("server");tzyMusicPage.innerHTML=`<meting-js id="${id}"server="${server}"type="${playlistType}"mutex="true"preload="auto"order="random"></meting-js>`;}else{tzyMusicPage.innerHTML=`<meting-js id="${userId}"server="${userServer}"type="${userType}"mutex="true"preload="auto"order="random"></meting-js>`;}tzy.changeMusicBg(false);}};tzy.getCustomPlayList();const vh=window.innerHeight*1;document.documentElement.style.setProperty('--vh',`${vh}px`);window.addEventListener('resize',()=>{let vh=window.innerHeight*1;document.documentElement.style.setProperty('--vh',`${vh}px`);});function extractValue(input){var valueRegex=/\("([^\s]+)"\)/g;var match=valueRegex.exec(input);return match[1];}document.addEventListener("keydown",function(event){if(event.code==="Space"){event.preventDefault();document.querySelector('meting-js').aplayer.toggle();};if(event.keyCode===39){event.preventDefault();document.querySelector('meting-js').aplayer.skipForward();};if(event.keyCode===37){event.preventDefault();document.querySelector('meting-js').aplayer.skipBack();}if(event.keyCode===38){if(volume<=1){volume+=0.1;document.querySelector('meting-js').aplayer.volume(volume,true);}}if(event.keyCode===40){if(volume>=0){volume+=-0.1;document.querySelector('meting-js').aplayer.volume(volume,true);}}});